---
title: Events
description: Working with events in PoloCloud using the Java SDK
icon: Zap
---

import { Tab, Tabs } from 'fumadocs-ui/components/tabs';
import { DynamicCodeBlock } from 'fumadocs-ui/components/dynamic-codeblock';
import { Callout } from 'fumadocs-ui/components/callout';

## Event Provider

The `EventProvider` gives you access to send and receive events in your PoloCloud infrastructure. Events enable real-time communication and coordination between different parts of your cloud system.

### Initialization

<Tabs items={['Kotlin', 'Java']}>
    <Tab value="Kotlin">
        <DynamicCodeBlock lang="kotlin" code='val eventProvider = Polocloud.instance().eventProvider()' />
    </Tab>
    <Tab value="Java">
        <DynamicCodeBlock lang="java" code='SharedEventProvider eventProvider = Polocloud.instance().eventProvider();' />
    </Tab>
</Tabs>

<div className="text-center mb-12">
    <div className="w-20 h-1 bg-gradient-to-r from-transparent via-primary/50 to-transparent rounded-full mx-auto mb-6" />
    <div className="text-xl text-muted-foreground max-w-3xl mx-auto">
        Send and receive real-time events for seamless communication across your cloud infrastructure
    </div>
</div>

## Sending Events

Send events to notify other parts of your system:

<Tabs items={['Kotlin', 'Java']}>
    <Tab value="Kotlin">
        <DynamicCodeBlock lang="kotlin" code={`// Send a custom event
val customEvent = MyCustomEvent("Hello from service!")
eventProvider.call(customEvent)

// Send a player join event
val playerJoinEvent = PlayerJoinEvent(player)
eventProvider.call(playerJoinEvent)

// Send a service state change event
val serviceChangeEvent = ServiceChangeStateEvent(service)
eventProvider.call(serviceChangeEvent)`} />
    </Tab>
    <Tab value="Java">
        <DynamicCodeBlock lang="java" code={`// Send a custom event
MyCustomEvent customEvent = new MyCustomEvent("Hello from service!");
eventProvider.call(customEvent);

// Send a player join event
PlayerJoinEvent playerJoinEvent = new PlayerJoinEvent(player);
eventProvider.call(playerJoinEvent);

// Send a service state change event
ServiceChangeStateEvent serviceChangeEvent = new ServiceChangeStateEvent(service);
eventProvider.call(serviceChangeEvent);`} />
    </Tab>
</Tabs>

## Subscribing to Events

Listen for events and react to them in real-time:

<Tabs items={['Kotlin', 'Java']}>
    <Tab value="Kotlin">
        <DynamicCodeBlock lang="kotlin" code={`// Subscribe to player join events
eventProvider.subscribe(PlayerJoinEvent::class.java) { event ->
    println("Player joined: \${event.player.name}")
    // Handle player join logic
}

// Subscribe to service state changes
eventProvider.subscribe(ServiceChangeStateEvent::class.java) { event ->
    println("Service state changed: \${event.service.name()}")
    // Handle service state change logic
}

// Subscribe to custom events
eventProvider.subscribe(MyCustomEvent::class.java) { event ->
    println("Received custom event: \${event.message}")
    // Handle custom event logic
}`} />
    </Tab>
    <Tab value="Java">
        <DynamicCodeBlock lang="java" code={`// Subscribe to player join events
eventProvider.subscribe(PlayerJoinEvent.class, event -> {
    System.out.println("Player joined: " + event.getPlayer().name);
    // Handle player join logic
});

// Subscribe to service state changes
eventProvider.subscribe(ServiceChangeStateEvent.class, event -> {
    System.out.println("Service state changed: " + event.getService().name());
    // Handle service state change logic
});

// Subscribe to custom events
eventProvider.subscribe(MyCustomEvent.class, event -> {
    System.out.println("Received custom event: " + event.getMessage());
    // Handle custom event logic
});`} />
    </Tab>
</Tabs>

## Available Event Types

<Callout type="info">
**Built-in Event Types**

PoloCloud provides several built-in event types for common cloud operations and state changes.
</Callout>

| Event Type                | Description                                    |
| ------------------------- | ---------------------------------------------- |
| `PlayerJoinEvent`         | Triggered when a player joins a service       |
| `PlayerLeaveEvent`        | Triggered when a player leaves a service      |
| `ServiceChangeStateEvent` | Triggered when a service state changes        |
| `ServiceChangePlayerCountEvent` | Triggered when player count changes      |
| `ServiceLogEvent`         | Triggered when service logs are generated     |

## Event Management Examples

### Custom Event Implementation

<Tabs items={['Kotlin', 'Java']}>
    <Tab value="Kotlin">
        <DynamicCodeBlock lang="kotlin" code={`// Define a custom event
data class MyCustomEvent(val message: String) : Event

// Send the custom event
val event = MyCustomEvent("Custom message from service")
eventProvider.call(event)

// Subscribe to the custom event
eventProvider.subscribe(MyCustomEvent::class.java) { event ->
    println("Received: \${event.message}")
}`} />
    </Tab>
    <Tab value="Java">
        <DynamicCodeBlock lang="java" code={`// Define a custom event
public class MyCustomEvent implements Event {
    private final String message;
    
    public MyCustomEvent(String message) {
        this.message = message;
    }
    
    public String getMessage() {
        return message;
    }
}

// Send the custom event
MyCustomEvent event = new MyCustomEvent("Custom message from service");
eventProvider.call(event);

// Subscribe to the custom event
eventProvider.subscribe(MyCustomEvent.class, event -> {
    System.out.println("Received: " + event.getMessage());
});`} />
    </Tab>
</Tabs>

### Event-Driven Service Management

<Tabs items={['Kotlin', 'Java']}>
    <Tab value="Kotlin">
        <DynamicCodeBlock lang="kotlin" code={`// Monitor service state changes
eventProvider.subscribe(ServiceChangeStateEvent::class.java) { event ->
    val service = event.service
    when (service.state) {
        ServiceState.ONLINE -> {
            println("Service \${service.name()} is now online")
            // Start monitoring, send notifications, etc.
        }
        ServiceState.STOPPED -> {
            println("Service \${service.name()} has stopped")
            // Cleanup, restart logic, etc.
        }
        ServiceState.STOPPING -> {
            println("Service \${service.name()} is stopping")
            // Prepare for shutdown
        }
        ServiceState.STARTING -> {
            println("Service \${service.name()} is starting")
            // Wait for startup, prepare resources, etc.
        }
    }
}`} />
    </Tab>
    <Tab value="Java">
        <DynamicCodeBlock lang="java" code={`// Monitor service state changes
eventProvider.subscribe(ServiceChangeStateEvent.class, event -> {
    Service service = event.getService();
    switch (service.state) {
        case ONLINE:
            System.out.println("Service " + service.name() + " is now online");
            // Start monitoring, send notifications, etc.
            break;
        case STOPPED:
            System.out.println("Service " + service.name() + " has stopped");
            // Cleanup, restart logic, etc.
            break;
        case STOPPING:
            System.out.println("Service " + service.name() + " is stopping");
            // Prepare for shutdown
            break;
        case STARTING:
            System.out.println("Service " + service.name() + " is starting");
            // Wait for startup, prepare resources, etc.
            break;
    }
});`} />
    </Tab>
</Tabs>

### Player Event Handling

<Tabs items={['Kotlin', 'Java']}>
    <Tab value="Kotlin">
        <DynamicCodeBlock lang="kotlin" code={`// Track player activity
eventProvider.subscribe(PlayerJoinEvent::class.java) { event ->
    val player = event.player
    println("Player \${player.name} joined \${player.currentServiceName}")
    
    // Update player count, send welcome message, etc.
}

eventProvider.subscribe(PlayerLeaveEvent::class.java) { event ->
    val player = event.player
    println("Player \${player.name} left \${player.currentServiceName}")
    
    // Update player count, cleanup, etc.
}`} />
    </Tab>
    <Tab value="Java">
        <DynamicCodeBlock lang="java" code={`// Track player activity
eventProvider.subscribe(PlayerJoinEvent.class, event -> {
    PolocloudPlayer player = event.getPlayer();
    System.out.println("Player " + player.name + " joined " + player.currentServiceName);
    
    // Update player count, send welcome message, etc.
});

eventProvider.subscribe(PlayerLeaveEvent.class, event -> {
    PolocloudPlayer player = event.getPlayer();
    System.out.println("Player " + player.name + " left " + player.currentServiceName);
    
    // Update player count, cleanup, etc.
});`} />
    </Tab>
</Tabs>

<Callout type="tip">
**Event-Driven Architecture**

Events enable loose coupling between different parts of your cloud infrastructure. Use them for real-time monitoring, notifications, and coordination between services.
</Callout>

The Event Provider gives you powerful tools to build event-driven applications and real-time communication across your entire cloud infrastructure! âš¡ðŸš€
