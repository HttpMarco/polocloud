---
title: Subscribe to Events
description: Subscribe to events using the Rust SDK.
---

import { DynamicCodeBlock } from 'fumadocs-ui/components/dynamic-codeblock';
import { Callout } from 'fumadocs-ui/components/callout';

## Subscribe to events

Use this method to subscribe to specific event types with a callback function.

<DynamicCodeBlock
  lang="rust"
  code={`use polocloud_sdk::PoloCloudSDK;
use serde::Deserialize;

// Define your event type
#[derive(Debug, Deserialize)]
struct PlayerJoinedEvent {
    player_name: String,
    service_name: String,
}

// Implement the Event trait
impl polocloud_sdk::Event for PlayerJoinedEvent {
    fn event_name() -> String {
        "player_joined".to_string()
    }
}

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    let sdk = PoloCloudSDK::new().await?;
    let mut event_provider = sdk.event_provider().lock().await?;
    
    // Subscribe to player joined events
    event_provider.subscribe::<PlayerJoinedEvent, _>(|event| {
        println!("Player {} joined service {}", event.player_name, event.service_name);
    }).await?;
    
    // Keep the program running to receive events
    tokio::time::sleep(tokio::time::Duration::from_secs(60)).await;
    
    Ok(())
}`}
/>

<Callout type="info">
  The subscription runs in a background task. Make sure to keep your program running to receive events.
</Callout>

## Event Trait

Your event types must implement the `Event` trait:

<DynamicCodeBlock
  lang="rust"
  code={`use polocloud_sdk::Event;

impl Event for MyEvent {
    fn event_name() -> String {
        "my_event".to_string()
    }
}`}
/>

## Return value

- **Type:** <code>Result&lt;(), Status&gt;</code>

The subscription starts immediately and runs in the background. Events will be delivered to your callback function as they occur.
